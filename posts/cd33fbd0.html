<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">


  <link rel="manifest" href="/images/manifest.json">


  <meta name="msapplication-config" content="/images/browserconfig.xml" />



  <meta name="keywords" content="机器学习,算法,推荐," />





  <link rel="alternate" href="/atom.xml" title="小火箭的博客" type="application/atom+xml" />






<meta name="description" content="参考原作：推荐系统三十六式-刑无刀 8.【近邻推荐】人以群分，你是什么人就看到什么世界协同过滤，普通且重要。 协同过滤推荐系统度过了只能使用基于内容的推荐阶段后,就有了大量的用户行为数据。这个用户物品的关系矩阵中填充的就是用户对物品的态度，但并不是每个位置都有，需要的就是把那些还没有的地方填起来。这个关系矩阵是协同过滤的命根子，一切都围绕它来进行。  协同过滤是一个比较大的算法范畴。通常划分为两类">
<meta property="og:type" content="article">
<meta property="og:title" content="推荐系统三十六式--学习笔记（8-10 近邻推荐）">
<meta property="og:url" content="https://www.xiemingzhao.com/posts/cd33fbd0.html">
<meta property="og:site_name" content="小火箭的博客">
<meta property="og:description" content="参考原作：推荐系统三十六式-刑无刀 8.【近邻推荐】人以群分，你是什么人就看到什么世界协同过滤，普通且重要。 协同过滤推荐系统度过了只能使用基于内容的推荐阶段后,就有了大量的用户行为数据。这个用户物品的关系矩阵中填充的就是用户对物品的态度，但并不是每个位置都有，需要的就是把那些还没有的地方填起来。这个关系矩阵是协同过滤的命根子，一切都围绕它来进行。  协同过滤是一个比较大的算法范畴。通常划分为两类">
<meta property="og:locale">
<meta property="og:image" content="https://mzxie-image.oss-cn-hangzhou.aliyuncs.com/recSystem36L/%E8%BF%91%E9%82%BB%E6%8E%A8%E8%8D%90.jpg">
<meta property="article:published_time" content="2018-11-02T16:00:00.000Z">
<meta property="article:modified_time" content="2025-01-12T12:48:46.662Z">
<meta property="article:author" content="小火箭">
<meta property="article:tag" content="机器学习">
<meta property="article:tag" content="算法">
<meta property="article:tag" content="推荐">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mzxie-image.oss-cn-hangzhou.aliyuncs.com/recSystem36L/%E8%BF%91%E9%82%BB%E6%8E%A8%E8%8D%90.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.xiemingzhao.com/posts/cd33fbd0.html"/>





  <title>推荐系统三十六式--学习笔记（8-10 近邻推荐） | 小火箭的博客</title>
  








<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


<script type="text/javascript"
color="0,0,0" opacity='0.5' zIndex="-1" count="150" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    
    <a href="https://github.com/xiemingzhao"><img style="position:absolute;top:0;right:0;border:0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小火箭的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">愿世界和平！！！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-comments"></i> <br />
            
            留言板
          </a>
        </li>
      
        
        <li class="menu-item menu-item-others">
          <a href="/others/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-folder"></i> <br />
            
            其他
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.xiemingzhao.com/posts/cd33fbd0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://i.postimg.cc/vBxZQfvz/img-0182.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小火箭的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">推荐系统三十六式--学习笔记（8-10 近邻推荐）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-03T00:00:00+08:00">
                2018-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E4%B8%89%E5%8D%81%E5%85%AD%E5%BC%8F/" itemprop="url" rel="index">
                    <span itemprop="name">推荐系统三十六式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/posts/cd33fbd0.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/posts/cd33fbd0.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 阅读数
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  17
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://time.geekbang.org/column/intro/74">参考原作：推荐系统三十六式-刑无刀</a></p>
<h2 id="8-【近邻推荐】人以群分，你是什么人就看到什么世界"><a href="#8-【近邻推荐】人以群分，你是什么人就看到什么世界" class="headerlink" title="8.【近邻推荐】人以群分，你是什么人就看到什么世界"></a>8.【近邻推荐】人以群分，你是什么人就看到什么世界</h2><p>协同过滤，普通且重要。</p>
<h3 id="协同过滤"><a href="#协同过滤" class="headerlink" title="协同过滤"></a><strong>协同过滤</strong></h3><p>推荐系统度过了只能使用基于内容的推荐阶段后,就有了大量的用户行为数据。这个用户物品的关系矩阵中填充的就是用户对物品的态度，但并不是每个位置都有，需要的就是把那些还没有的地方填起来。这个关系矩阵是协同过滤的命根子，一切都围绕它来进行。</p>
<blockquote>
<p>协同过滤是一个比较大的算法范畴。通常划分为两类：</p>
<ol>
<li>基于记忆的协同过滤（Memory-Based）:<br>就是记住每个人消费过什么东西，然后给他推荐相似的东西，或者推荐相似的人消费的东西</li>
<li>基于模型的协同过滤（Model-Based）:<br>是从用户物品关系矩阵中去学习一个模型，从而把那些矩阵空白处填满</li>
</ol>
</blockquote>
<p>基于记忆的协同过滤的一种——基于用户，或者叫做 User-Based， User to User。</p>
<span id="more"></span>
<h4 id="基于用户的协同过滤"><a href="#基于用户的协同过滤" class="headerlink" title="基于用户的协同过滤"></a><strong>基于用户的协同过滤</strong></h4><p><strong>思想:</strong><br>先根据历史消费行为帮你找到一群和你口味很相似的用户；然后根据这些和你很相似的用户再消费了什么新的、你没有见过的物品，都可以推荐给你。</p>
<p><strong>原理:</strong><br>第一步，准备用户向量，从这个矩阵中，理论上可以给每一个用户得到一个向量。</p>
<blockquote>
<p>向量有三个特点：</p>
<ol>
<li>向量的维度就是物品的个数；</li>
<li>向量是稀疏的，也就是说并不是每个维度上都有数值；</li>
<li>向量维度上的取值可以是简单的 0 或者 1，也就是布尔值。</li>
</ol>
</blockquote>
<p>第二步，用每一个用户的向量，两两计算用户之间的相似度，设定一个相似度阈值或者设定一个最大数量，为每个用户保留与其最相似的用户。<br>第三步，为每一个用户产生推荐结果。</p>
<script type="math/tex; mode=display">P_{u,i}=\frac{\sum_j^n(sim_{u,j}*R_{j,i})}{\sum_j^nsim_{u,j}}</script><p>等号左边就是计算一个物品 i 和一个用户 u 的匹配分数，等号右边是这个分数的计算过程，分母是把和用户 u 相似的 n 个用户的相似度加起来，分子是把这 n 个用户各自对物品 i 的态度，按照相似度加权求和。</p>
<p><strong>问题：</strong></p>
<ol>
<li>只有原始用户行为日志，需要从中构造出矩阵，怎么做？</li>
<li>如果用户的向量很长，计算一个相似度则耗时很久，怎么办？</li>
<li>如果用户量很大，而且通常如此，两两计算用户相似度也是一个大坑，怎么办？</li>
<li>在计算推荐时，看上去要为每一个用户计算他和每一个物品的分数，又是一个大坑，怎么办？</li>
</ol>
<p><strong>1.构造矩阵</strong><br>我们在做协同过滤计算时，所用的矩阵是稀疏的。</p>
<blockquote>
<p>这里介绍典型的稀疏矩阵存储格式( Spark 中，Python 的 NumPy 包中)。</p>
<ol>
<li>CSR：这个存储稍微复杂点，是一个整体编码方式。它有三个组成：数值、列号和行偏移共同编码。</li>
<li>COO：这个存储方式很简单，每个元素用一个三元组表示（行号，列号，数值），只存储有值的元素，缺失值不存储。</li>
</ol>
</blockquote>
<p><strong>2 相似度计算</strong><br>首先是单个相似度计算问题，如果碰上向量很长，无论什么相似度计算方法，都要遍历向量，如果用循环实现就更可观了。</p>
<blockquote>
<p>所以通常降低相似度计算复杂度的办法有两种。</p>
<ol>
<li>对向量采样计算。道理很简单，两个一百维的向量计算出的相似度是 0.7，我现在忍受一些精度的损失，随机从中取出 10 维计算，得到相似度是 0.72，和它误差也不大。这个算法由 Twitter 提出，叫做 <strong>DIMSUM 算法</strong>，已经在 Spark 中实现了。</li>
<li>向量化计算。在机器学习领域，难道向量计算都要用循环实现吗？并不是，现代的线性代数库都支持直接的向量运算，比循环快很多。一般像常用的向量库都天然支持的，比如 Python 的 NumPy 。</li>
</ol>
</blockquote>
<p>其次的问题就是，如果用户量很大，两两之间计算代价就很大。</p>
<p>第一个办法是：将相似度计算拆成 Map Reduce 任务，将原始矩阵 Map 成键为用户对，值为两个用户对同一个物品的评分之积，Reduce 阶段对这些乘积再求和，Map Reduce 任务结束后再对这些值归一化；<br>第二个办法是：不用基于用户的协同过滤。</p>
<p>另外，这种计算对象两两之间的相似度的任务，如果数据量不大，一般来说不超过百万个，然后矩阵又是稀疏的，那么有很多单机版本的工具其实更快，比如 KGraph、 GraphCHI 等。</p>
<p><strong>3 推荐计算</strong><br>计算量大，可利用公式特点：</p>
<ul>
<li>只有相似用户喜欢过的物品需要计算，这个大大的赞，这个数量相比全部物品少了很多；</li>
<li>把计算过程拆成 Map Reduce 任务。</li>
</ul>
<blockquote>
<p>拆 Map Reduce 任务的做法是：</p>
<ol>
<li>遍历每个用户喜欢的物品列表；</li>
<li>获取该用户的相似用户列表；</li>
<li>把每一个喜欢的物品Map成两个记录发射出去。<br>一个是键为&lt;相似用户ID，物品ID，1&gt;三元组，可以拼成一个字符串，值为 &lt;相似度&gt;，另一个是键为 &lt;相似用户ID，物品ID，0&gt; 三元组，值为 &lt;喜欢程度 * 相似度&gt;，其中的 1 和 0 为了区分两者，在最后一步中会用到；</li>
<li>Reduce 阶段，求和后输出；</li>
<li>&lt; 相似用户 ID，物品 ID, 0&gt; 的值除以 &lt; 相似用户 ID，物品 ID, 1&gt; 的值</li>
</ol>
</blockquote>
<p>拆分 Map Reduce 任务也不一定非要用 Hadoop 或者 Spark 实现。也可以用单机实现这个过程。例如 C++ 里面 OpenMP 库。</p>
<p><strong>4 一些改进</strong><br>对于基于用户的协同过滤有一些常见的改进办法，改进主要集中在用户对物品的喜欢程度上：</p>
<blockquote>
<ol>
<li>惩罚对热门物品的喜欢程度，这是因为，热门的东西很难反应出用户的真实兴趣，更可能是被煽动，或者无聊随便点击的情形，这是群体行为常见特点；</li>
<li>增加喜欢程度的时间衰减，一般使用一个<strong>指数函数</strong>，指数就是一个负数，值和喜欢行为发生时间间隔正相关即可，这很好理解，小时候喜欢的东西不代表我现在的口味，人都是会变的，这是人性。</li>
</ol>
</blockquote>
<p>基于用户的协同过滤有两个产出：</p>
<ol>
<li>相似用户列表；</li>
<li>基于用户的推荐结果。</li>
</ol>
<hr>
<h2 id="9-【近邻推荐】解密“看了又看”和“买了又买”"><a href="#9-【近邻推荐】解密“看了又看”和“买了又买”" class="headerlink" title="9.【近邻推荐】解密“看了又看”和“买了又买”"></a>9.【近邻推荐】解密“看了又看”和“买了又买”</h2><p>电商网站中‘看了还看’，‘买了还买’这样的推荐形式背后都是来自一个古老的推荐算法，叫做基于物品的协同过滤，通常也被叫作 Item-Based，因为后者更容易搜索到相关的文章，所以被更多地提及。</p>
<h3 id="基于物品（Item-Based）"><a href="#基于物品（Item-Based）" class="headerlink" title="基于物品（Item-Based）"></a><strong>基于物品（Item-Based）</strong></h3><p>基于物品的协同过滤算法诞生于 1998 年，是由亚马逊首先提出的，并在 2001 年由其发明者发表了相应的论文（ Item-Based Collaborative Filtering Recommendation Algorithms ）。亚马逊早在 1998 年，也就是论文发表的三年前就申请了专利。</p>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a><strong>原理</strong></h4><p>首先对于前述的基于用户的推荐有几个问题：</p>
<ol>
<li>用户数量往往比较大，计算起来非常吃力，成为瓶颈；</li>
<li>用户的口味其实变化还是很快的，不是静态的，所以兴趣迁移问题很难反应出来；</li>
<li>数据稀疏，用户和用户之间有共同的消费行为实际上是比较少的，而且一般都是一些热门物品，对发现用户兴趣帮助也不大。</li>
</ol>
<p><strong>但是基于物品的协同过滤首先计算相似物品，然后再根据用户消费过、或者正在消费的物品为其推荐相似的</strong></p>
<blockquote>
<p>算法的基本步骤：</p>
<ol>
<li>构建用户物品的关系矩阵，矩阵元素可以是用户的消费行为，也可以是消费后的评价，还可以是对消费行为的某种量化如时间、次数、费用等；</li>
<li>假如矩阵的行表示物品，列表示用户的话，那么就两两计算行向量之间的相似度，得到物品相似度矩阵，行和列都是物品；</li>
<li>产生推荐结果，根据推荐场景不同，有两种产生结果的形式。一种是为某一个物品推荐相关物品，另一种是在个人首页产生类似“猜你喜欢”的推荐结果。不要急，稍后我会分别说。</li>
</ol>
</blockquote>
<p>其优势在于以下几点：</p>
<ul>
<li>首先，物品的数量，或者严格的说，可以推荐的物品数量往往少于用户数量；所以一般计算物品之间的相似度就不会成为瓶颈。</li>
<li>其次，物品之间的相似度比较静态，它们变化的速度没有用户的口味变化快；所以完全解耦了用户兴趣迁移这个问题。</li>
<li>最后，物品对应的消费者数量较大，对于计算物品之间的相似度稀疏度是好过计算用户之间相似度的。</li>
</ul>
<p>&nbsp;</p>
<h4 id="计算物品相似度"><a href="#计算物品相似度" class="headerlink" title="计算物品相似度"></a><strong>计算物品相似度</strong></h4><p>从用户物品关系矩阵中得到的物品向量：</p>
<blockquote>
<ol>
<li>它是一个稀疏向量；</li>
<li>向量的维度是用户，一个用户代表向量的一维，这个向量的总共维度是总用户数量；</li>
<li>向量各个维度的取值是用户对这个物品的消费结果，可以是行为本身的布尔值，也可以是消费行为量化如时间长短、次数多少、费用大小等，还可以是消费的评价分数；</li>
<li>没有消费过的就不再表示出来，所以说是一个稀疏向量。</li>
</ol>
</blockquote>
<p>计算两个物品的相似度，这里以余弦相似度为例：</p>
<script type="math/tex; mode=display">sim(i,j)=\frac{\sum_{k=1}^nR_{ik}*R_{jk}}{\sqrt{\sum_{k=1}^nR_{ik}^2}\sqrt{\sum_{k=1}^nR_{jk}^2}}</script><p>他们都是稀疏向量，也就是向量中绝大多数值都是 0，求和时不用算，点积时更不用算，甚至求点积时只用管两个物品的公共用户，只是少许几个乘积而已。</p>
<p>物品之间的相似度计算是这个算法 可以改进的地方。<strong>通常的改进方向有下面两种。</strong></p>
<ul>
<li>物品中心化。<br>把矩阵中的分数，减去的是物品分数的均值；先计算每一个物品收到评分的均值，然后再把物品向量中的分数减去对应物品的均值。以此来去掉物品中铁杆粉丝群体的非理性因素。</li>
<li>用户中心化。<br>把矩阵中的分数，减去对应用户分数的均值；先计算每一个用户的评分均值，然后把他打过的所有分数都减去这个均值。</li>
</ul>
<p>隐式反馈取值特殊，有一些基于物品的改进推荐算法无法应用，比如著名的 <strong>Slope One 算法。</strong></p>
<h4 id="计算推荐结果"><a href="#计算推荐结果" class="headerlink" title="计算推荐结果"></a><strong>计算推荐结果</strong></h4><p><strong>第一种属于 TopK 推荐，形式上也常常属于类似“猜你喜欢”这样的。</strong><br>出发方式是当用户访问首页时，汇总和“用户已经消费过的物品相似”的物品，按照汇总后分数从高到低推出。汇总的公式是这样的：</p>
<script type="math/tex; mode=display">\hat R_{ui} = \frac{\sum_{j=1}^msim(i,j)*R_{uj}}{\sum_{j=1}^msim(i,j)}</script><p>核心思想就和基于用户的推荐算法一样，用相似度加权汇总。这个过程都是离线完成后，去掉那些用户已经消费过的，保留分数 高的 k 个结果存储。</p>
<p><strong>第二种属于相关推荐，也就是专栏题目所指的场景。</strong><br>这类推荐不需要提前合并计算，当用户访问一个物品的详情页面时，或者完成一个物品消费的结果面，直接获取这个物品的相似物品推荐，就是“看了又看”或者“买了又买”的推荐结果了。</p>
<blockquote>
<p>Slope One 算法经典的基于物品推荐，相似度矩阵计算无法实时更新，整个过程都是离线计算的，而且还有另一个问题，相似度计算时没有考虑相似度的置信问题。例如，两个物品，他们都被同一个用户喜欢写留言了，且只被这一个用户喜欢了，那么余弦相似度计算的结果是 1，这个 1 在 后汇总计算推荐分数时，对结果的影响却 大。</p>
</blockquote>
<p>Slope One 算法针对这些问题有很好的改进。在 2005 年首次问世，Slope One 算法专门针对评分矩阵，不适用于行为矩阵。Slope One 算法计算的不是物品之间的相似度，而是计算的物品之间的距离，相似度的反面。<br>例如：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">用户</th>
<th style="text-align:center">物品A</th>
<th style="text-align:center">物品B</th>
<th style="text-align:center">物品C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">用户1</td>
<td style="text-align:center">5</td>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">用户2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">4</td>
<td style="text-align:center">null</td>
</tr>
<tr>
<td style="text-align:center">用户3</td>
<td style="text-align:center">null</td>
<td style="text-align:center">2</td>
<td style="text-align:center">5</td>
</tr>
</tbody>
</table>
</div>
<p>物品间的差距：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">用户</th>
<th style="text-align:center">物品A</th>
<th style="text-align:center">物品B</th>
<th style="text-align:center">物品C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">物品A</td>
<td style="text-align:center">0</td>
<td style="text-align:center">-0.5(2)</td>
<td style="text-align:center">-3(1)</td>
</tr>
<tr>
<td style="text-align:center">物品B</td>
<td style="text-align:center">0.5(2)</td>
<td style="text-align:center">0</td>
<td style="text-align:center">-1(1)</td>
</tr>
<tr>
<td style="text-align:center">物品C</td>
<td style="text-align:center">3(1)</td>
<td style="text-align:center">1(1)</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注:括号里表示两个物品的共同用户数量，代表置信度。括号前的数字代表共同用户评分的平均差距。</strong></p>
<p>如此时计算用户3对物品A的评分，我们通过评分表可以推出，<br>基于物品AB，用户3应给物品A评分2+0.5=2.5<br>基于物品AC，用户3应给物品C评分5+3=8<br>综合置信度，于是汇总的评分为：$\frac{8<em>1+2.5</em>2}{1+2}=4.33$。</p>
<hr>
<h2 id="10-【近邻推荐】协同过滤中的相似度计算方法有哪些"><a href="#10-【近邻推荐】协同过滤中的相似度计算方法有哪些" class="headerlink" title="10.【近邻推荐】协同过滤中的相似度计算方法有哪些"></a>10.【近邻推荐】协同过滤中的相似度计算方法有哪些</h2><h3 id="相似度的本质"><a href="#相似度的本质" class="headerlink" title="相似度的本质"></a><strong>相似度的本质</strong></h3><p>推荐系统中，推荐算法分为两个门派，一个是机器学习派，另一个就是相似度门派。机器学习派是后起之秀，而相似度派则是泰山北斗，以致撑起来推荐系统的半壁江山。近邻推荐的核心就是相似度计算方法的选择，由于近邻推荐并没有采用最优化思路，所以效果通常取决于矩阵的量化方式和相似度的选择。</p>
<p><strong>近邻推荐的核心就是相似度计算方法的选择，由于近邻推荐并没有采用最优化思路，所以效果通常取决于矩阵的量化方式和相似度的选择。</strong></p>
<p>其实属于另一门派的推荐算法——机器学习中，也有很多算法在某种角度看做是相似度度量。逻辑回归或者线性回归中，一边是特征向量，另一边是模型参数向量，两者的点积运算，就可以看做是相似度计算。</p>
<p><strong>近邻推荐中，最常用的相似度是余弦相似度。然而还有欧氏距离、皮尔逊相关度、自适应的余弦相似度、局部敏感哈希等。</strong></p>
<h3 id="相似度的计算方法"><a href="#相似度的计算方法" class="headerlink" title="相似度的计算方法"></a><strong>相似度的计算方法</strong></h3><h4 id="数据分类"><a href="#数据分类" class="headerlink" title="数据分类"></a><strong>数据分类</strong></h4><p>相似度计算对象是向量，或者叫做高维空间下的坐标，一个意思。那表示这个向量的数值就有两种：</p>
<ol>
<li>实数值；</li>
<li>布尔值。</li>
</ol>
<h4 id="1-欧氏距离"><a href="#1-欧氏距离" class="headerlink" title="1 欧氏距离"></a><strong>1 欧氏距离</strong></h4><p>欧式空间下度量距离的方法。不适合布尔向量之间。公式：</p>
<script type="math/tex; mode=display">E(p,q)=\sqrt{\sum_{i=1}^n(p_i-q_i)^2}</script><p>通常相似度计算度量结果希望是<br>[-1，1] 或者 [0，1] 之间，所以欧式距离要么无法直接使用到这个场景中，要么需要经过二次转化得到:</p>
<script type="math/tex; mode=display">sim(p,q)=\frac{1}{1+E(p,q)}</script><h4 id="2-余弦相似度"><a href="#2-余弦相似度" class="headerlink" title="2 余弦相似度"></a><strong>2 余弦相似度</strong></h4><p>度量的是两个向量之间的夹角，其实就是用夹角的余弦值来度量，所以名字叫余弦相似度。余弦相似度在度量<strong>文本相似度、用户相似度、物品相似度</strong>的时候都较为常用；</p>
<p>但是在这里需要提醒你一点，余弦相似度的特点：<strong>它与向量的长度无关</strong>。因为余弦相似度计算需要对向量长度做归一化：</p>
<script type="math/tex; mode=display">cos(p,q)=\frac{\sum_ip_iq_i}{\sqrt{\sum_iq_i^2}\sqrt{\sum_ip_i^2}}</script><p>经过向量长度归一化后的相似度量方式，<strong>背后潜藏着这样一种思想：两个向量，只要方向一致，无论程度强弱，都可以视为“相似”。</strong>在协同过滤中，如果选择余弦相似度，某种程度上更加依赖两个物品的共同评价用户数，而不是用户给予的评分多少。这就是由于余弦相似度被向量长度归一化后的结果。</p>
<p>对余弦相似度有个改进，改进的算法叫做调整的余弦相似度（Adjusted Cosine Similarity）。调整的方法很简单，就是先计算向量每个维度上的均值，然后每个向量在各个维度上都减去均值后，再计算余弦相似度。</p>
<blockquote>
<p>举个小例子，用户 A 对两部电影评分分别是 1 分和 2 分，用户 B 对同样这两部电影评分是 4 分和 5 分。用余弦相似度计算出来，两个用户的相似度达到 0.98。这和实际直觉不符，用户 A 明显不喜欢这两部电影。用调整的余弦相似度计算得到的相似度是 -0.1，呈现出两个用户口味相反。</p>
</blockquote>
<h4 id="3-皮尔逊相关度"><a href="#3-皮尔逊相关度" class="headerlink" title="3 皮尔逊相关度"></a><strong>3 皮尔逊相关度</strong></h4><p>实际上也是一种余弦相似度，不过先对向量做了中心化，向量 p 和 q 各自减去向量的均值后，再计算余弦相似度。</p>
<script type="math/tex; mode=display">R(p,q)=\frac{\sum_{i=1}^n(p_i-\bar p)(q_i-\bar q)}{\sqrt{\sum_{i=1}^n(p_i-\bar p)^2}\sqrt{\sum_{i=1}^2(q_i-\bar q)}}</script><p>皮尔逊相关度计算结果范围在 -1 到 1。-1 表示负相关，1 比表示正相关。皮尔逊相关度其实度量的是两个随机变量是不是在同增同减。由于皮尔逊相关度度量的时两个变量的变化趋势是否一致，所以<strong>不适合用作计算布尔值向量之间相关度</strong>。</p>
<h4 id="4-杰卡德（Jaccard）相似度"><a href="#4-杰卡德（Jaccard）相似度" class="headerlink" title="4 杰卡德（Jaccard）相似度"></a><strong>4 杰卡德（Jaccard）相似度</strong></h4><p>是两个集合的交集元素个数在并集中所占的比例。由于集合非常适用于布尔向量表示，所以杰卡德相似度简直就是为布尔值向量私人定做的。</p>
<blockquote>
<p>计算方式是：</p>
<ol>
<li>分子是两个布尔向量做点积计算，得到的就是交集元素个数；</li>
<li>分母是两个布尔向量做或运算，再求元素和。</li>
</ol>
</blockquote>
<p><strong>余弦相似度适用于评分数据，杰卡德相似度适合用于隐式反馈数据。杰卡德相似度就只适合布尔值向量，余弦相似度弹性略大，适合两种向量。欧式距离度量的是绝对差异，余弦相似度度量的是方向差异，但是调整的余弦相似度则可以避免这个弱点。</strong></p>
<p>一位网友的案例：<br>做社交网络好友相似的度量，粗略来说可以用这几个特征：<br>帖子发布数量，月均发帖数量，平均帖子字数，头像，一些标签数据，例如是否大V，是否营销号，是否网红，职业等标签数据。</p>
<p>另外还可以统计发文Top关键词向量及词频。标签数据可计算杰卡的相似度，Top关键词可计算余弦相似度，发布量，字数等可计算欧氏距离，然后再融合这几种相似度得到总和相似度。</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://mzxie-image.oss-cn-hangzhou.aliyuncs.com/recSystem36L/%E8%BF%91%E9%82%BB%E6%8E%A8%E8%8D%90.jpg" alt="近邻推荐"></h2>
      
    </div>
    
    
    
    
    <div>
      
      <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
    </div>

    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/posts/cd33fbd0.html">推荐系统三十六式--学习笔记（8-10 近邻推荐）</a></p>
  <p><span>文章作者:</span><a href="/" title="访问  的个人博客"></a></p>
  <p><span>原始链接:</span><a href="/posts/cd33fbd0.html" title="推荐系统三十六式--学习笔记（8-10 近邻推荐）">https://www.xiemingzhao.com/posts/cd33fbd0.html</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://www.xiemingzhao.com/posts/cd33fbd0.html"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>

      
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> 机器学习</a>
          
            <a href="/tags/%E7%AE%97%E6%B3%95/" rel="tag"><i class="fa fa-tag"></i> 算法</a>
          
            <a href="/tags/%E6%8E%A8%E8%8D%90/" rel="tag"><i class="fa fa-tag"></i> 推荐</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/50170875.html" rel="next" title="推荐系统三十六式--学习笔记（5-7 内容推荐）">
                <i class="fa fa-chevron-left"></i> 推荐系统三十六式--学习笔记（5-7 内容推荐）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/99410703.html" rel="prev" title="推荐系统三十六式--学习笔记（11-13 矩阵分解）">
                推荐系统三十六式--学习笔记（11-13 矩阵分解） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
    <a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a>
    <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
    <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a class="bds_count" data-cmd="count"></a>
  </div>
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "2",
        "bdMiniList": false,
        "bdPic": ""
      },
      "share": {
        "bdSize": "16",
        "bdStyle": "0"
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://i.postimg.cc/vBxZQfvz/img-0182.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">53</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">54</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xiemingzhao" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="514829265@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-globe"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E3%80%90%E8%BF%91%E9%82%BB%E6%8E%A8%E8%8D%90%E3%80%91%E4%BA%BA%E4%BB%A5%E7%BE%A4%E5%88%86%EF%BC%8C%E4%BD%A0%E6%98%AF%E4%BB%80%E4%B9%88%E4%BA%BA%E5%B0%B1%E7%9C%8B%E5%88%B0%E4%BB%80%E4%B9%88%E4%B8%96%E7%95%8C"><span class="nav-number">1.</span> <span class="nav-text">8.【近邻推荐】人以群分，你是什么人就看到什么世界</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4"><span class="nav-number">1.1.</span> <span class="nav-text">协同过滤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E7%9A%84%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4"><span class="nav-number">1.1.1.</span> <span class="nav-text">基于用户的协同过滤</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E3%80%90%E8%BF%91%E9%82%BB%E6%8E%A8%E8%8D%90%E3%80%91%E8%A7%A3%E5%AF%86%E2%80%9C%E7%9C%8B%E4%BA%86%E5%8F%88%E7%9C%8B%E2%80%9D%E5%92%8C%E2%80%9C%E4%B9%B0%E4%BA%86%E5%8F%88%E4%B9%B0%E2%80%9D"><span class="nav-number">2.</span> <span class="nav-text">9.【近邻推荐】解密“看了又看”和“买了又买”</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E7%89%A9%E5%93%81%EF%BC%88Item-Based%EF%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">基于物品（Item-Based）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">2.1.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%89%A9%E5%93%81%E7%9B%B8%E4%BC%BC%E5%BA%A6"><span class="nav-number">2.1.2.</span> <span class="nav-text">计算物品相似度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E6%8E%A8%E8%8D%90%E7%BB%93%E6%9E%9C"><span class="nav-number">2.1.3.</span> <span class="nav-text">计算推荐结果</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E3%80%90%E8%BF%91%E9%82%BB%E6%8E%A8%E8%8D%90%E3%80%91%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E4%B8%AD%E7%9A%84%E7%9B%B8%E4%BC%BC%E5%BA%A6%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="nav-number">3.</span> <span class="nav-text">10.【近邻推荐】协同过滤中的相似度计算方法有哪些</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="nav-number">3.1.</span> <span class="nav-text">相似度的本质</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E4%BC%BC%E5%BA%A6%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95"><span class="nav-number">3.2.</span> <span class="nav-text">相似度的计算方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB"><span class="nav-number">3.2.1.</span> <span class="nav-text">数据分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%AC%A7%E6%B0%8F%E8%B7%9D%E7%A6%BB"><span class="nav-number">3.2.2.</span> <span class="nav-text">1 欧氏距离</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%BD%99%E5%BC%A6%E7%9B%B8%E4%BC%BC%E5%BA%A6"><span class="nav-number">3.2.3.</span> <span class="nav-text">2 余弦相似度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%9A%AE%E5%B0%94%E9%80%8A%E7%9B%B8%E5%85%B3%E5%BA%A6"><span class="nav-number">3.2.4.</span> <span class="nav-text">3 皮尔逊相关度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E6%9D%B0%E5%8D%A1%E5%BE%B7%EF%BC%88Jaccard%EF%BC%89%E7%9B%B8%E4%BC%BC%E5%BA%A6"><span class="nav-number">3.2.5.</span> <span class="nav-text">4 杰卡德（Jaccard）相似度</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">4.</span> <span class="nav-text"></span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小火箭</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">信仰</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>


<!--

  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>

-->



<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共247.7k字</span>
</div>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- 网站运行时间的设置 -->
<!--
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>  Sometimes your whole life boils down to one insame move.
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("03/09/2019 13:14:21");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>
-->
        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'TpMiFGGr4T8FnG248uRRaf4H-gzGzoHsz',
        appKey: 'NYRTcUPshFEJWpUk54Bfu4nX',
        placeholder: '朋友记得留下昵称和邮箱，我会尽快回复您的！',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  


  

  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":true,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
